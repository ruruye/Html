<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/mystyle.css">

<script>
proc1 = () => {
	
	// prompt로 입력
	input = prompt("주민번호를 입력하세요");
	
	// 각 자리별로 자르기 - substr
	yy = input.substr(0,2);
	mm = input.substr(2,2);
	dd = input.substr(4,2);
	gg = input.substr(7,1);
	
	// 성별 비교하기 - if
	if(gg == "1" || gg == "3"){
		gender = "남자";
	}else(gg =="2" || gg == "4")
		gender = "여자";
	
	// 년도가 2000년대인지 1900년대인지 비교
	if(gg == "1" || gg == "2"){			//숫자
		//year = 1900 + parseInt(yy); 	//문자
		year = "19" + yy;
	}else if(gg =="3" || gg == "4"){ 	//숫자
		//year = 2000 + parseInt(yy);  	//문자
		year = "20" + yy;
	}
	
	// 나이계산 ('+'할때만 구분)
	today = new Date();
	toyear = today.getFullYear();
	
	age = toyear - year;
	
	// 출력내용
	code = input.substr(0,8);
	
	str = `주민번호 : ${code}****** <br>`;  
	str += `생년월일 : ${year}년 ${mm}월 ${dd}일 <br>`;
	str += `성별 : ${gender} <br>`;
	str += `나이 : ${age} <br>`;
	
	//document.getElementById('result1').innerHTML = str;
	document.querySelector('#result1').innerHTML = str;
}

// proc2
proc2 = () => {
	
	multi = "234567892345";
	
	// 입력
	input = prompt("입력하세요");	// 110326-4432618
	incode = input.replace("-", ""); // 1103264432618 마지막7은 포함x
	
	console.log(input, incode);
	
	sum = 0;
	
	for(i=0; i<multi.length; i++){
		
		sum += incode.substr(i,1) * multi.substr(i, 1);
	}
	
	res = 11 - sum % 11;	// 0~11
	
	if(res == 10) res = 0;
	if(res == 11) res = 1;
	// 최종 res => 0~9
	
	if(incode.substr(12,1) == res) {
		a= "진짜";
	}else{
		a= "가짜";
	}
	
	// 출력
	str = input.substr(0, 8) + "******<br>";
	str += a;
	
	document.getElementById('result2').innerHTML = str;
}
</script>

</head>
<body>

<div class="box">
	<h3>prompt로 주민등록번호를 입력 받아 생년월일과 성별, 나이를 출력하는 프로그램을 작성하시오.<br>
	예) 주민등록번호를 110326-4432618로 입력 받은 경우
	</h3>

	<input type="button" value="확인" onclick="proc1()">
	<div id="result1" class="result"></div>
</div>

<div class="box">
	<h3>주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을 작성하시오.<br>
	예) 110326-4432618
	</h3>

	<input type="button" value="확인" onclick="proc2()">
	<div id="result2" class="result"></div>
</div>
</body>
</html>